version: '3.8'

services:
  benchmark:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - ./results:/benchmark/results
      - ../:/leafpress-src:ro
    working_dir: /benchmark
    command: /benchmark/run-all.sh
    # Resource limits for fair comparison
    deploy:
      resources:
        limits:
          cpus: '4'
          memory: 8G
